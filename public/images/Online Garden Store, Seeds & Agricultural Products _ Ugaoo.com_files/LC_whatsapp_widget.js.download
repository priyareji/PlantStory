class LimeChatWhatsapp{constructor({phone:t,prefill_text:e,button_message_mobile:s,button_message_desktop:i,widget_type_desktop:p,widget_type_mobile:o,display_size_desktop:l,display_size_mobile:a,display_on:h,position_mobile:_,bottom_margin_mobile:n,left_margin_mobile:r,right_margin_mobile:d,position_desktop:m,bottom_margin_desktop:b,left_margin_desktop:u,right_margin_desktop:g,show_pop_up:c,pop_up_message_position:y,pop_up_message_text:w,pop_up_image:f,pop_up_delay:x,pdp_prefill_text:A,pages_to_display:k,isShopify:$,includeVariant:z}){this.phone=t,this.prefill_text=e,this.button_message_mobile=s,this.button_message_desktop=i,this.widget_type_desktop=p,this.widget_type_mobile=o,this.display_size_desktop=l,this.display_size_mobile=a,this.display_on=h,this.position_mobile=_,this.bottom_margin_mobile=n,this.left_margin_mobile=r,this.right_margin_mobile=d,this.position_desktop=m,this.bottom_margin_desktop=b,this.left_margin_desktop=u,this.right_margin_desktop=g,this.show_pop_up=c,this.pop_up_message_position=y,this.pop_up_message_text=w,this.pop_up_image=f,this.pop_up_delay=x,this.pdp_prefill_text=A,this.pages_to_display=k,this.isShopify=$,this.includeVariant=z}deviceCheck(t){var e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return"desktop"===t&&!e||(!("mobile"!==t||!e)||("both"===t||void 0))}titleCase(t){for(var e=t.toLowerCase().split(" "),s=0;s<e.length;s++)e[s]=e[s].charAt(0).toUpperCase()+e[s].substring(1);return e.join(" ")}renderWidget(){this.deviceCheck(this.display_on)&&this.renderButton()}pageCheck(t){let e=!1;return t.forEach((t=>{"homepage"==t&&"/"==window.location.pathname&&(e=!0),"collections"==t&&window.location.pathname.includes("/collections/")&&(e=!0),"products"==t&&window.location.pathname.includes("/products/")&&(e=!0),"cart"==t&&"/cart"==window.location.pathname&&(e=!0),"pages"==t&&window.location.pathname.includes("/pages/")&&(e=!0),"checkout"==t&&window.location.pathname.includes("/checkouts/")&&(e=!0),"blogs"==t&&window.location.pathname.includes("/blogs/")&&(e=!0)})),e}getParameterByName(t,e){t=t.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}renderButton(){if(this.pageCheck(this.pages_to_display)||!this.isShopify){let o=document.createElement("script");o.setAttribute("src","https://kit.fontawesome.com/2640aa91b4.js"),document.body.appendChild(o);let l=document.createElement("link");l.setAttribute("href","https://fonts.googleapis.com/css2?family=Lato&family=Roboto&display=swap"),l.setAttribute("rel","stylesheet"),document.body.appendChild(l);let a=document.createElement("link");a.setAttribute("href","https://s3.ap-south-1.amazonaws.com/cdn.limechat.ai/packs/js/whatsapp_widget/LC_whatsapp_stylesheet.css"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),document.body.appendChild(a);let h=document.createElement("div");h.className="WhatsAppButton__root",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"left"===this.position_mobile?h.setAttribute("style",`position: fixed; bottom: ${this.bottom_margin_mobile}px; left: ${this.left_margin_mobile}px;`):h.setAttribute("style",`position: fixed; bottom: ${this.bottom_margin_mobile}px; right: ${this.right_margin_mobile}px;`):"left"===this.position_desktop?h.setAttribute("style",`position: fixed; bottom: ${this.bottom_margin_desktop}px; left: ${this.left_margin_desktop}px;`):h.setAttribute("style",`position: fixed; bottom: ${this.bottom_margin_desktop}px; right: ${this.right_margin_desktop}px;`),document.body.appendChild(h);let _=document.createElement("a"),n=document.createElement("a");if(window.location.pathname.includes("/products/")&&""!==this.pdp_prefill_text&&this.isShopify&&(window.location.href.includes("variant")&&!this.includeVariant||!window.location.href.includes("variant")&&this.includeVariant||!window.location.href.includes("variant")&&!this.includeVariant)){let i=window.location.href,p=i.split("/products/"),o="";if(p[1].includes("?")){o=p[1].split("?")[0]}else o=p[1];var t=o.replace(/\-/g," ").replace(/\//g,""),e=o+".xml";e=i.replace(o,e);var s=this.titleCase(t);fetch(e).then((t=>{t.text().then((t=>(new DOMParser).parseFromString(t,"text/xml"))).then((t=>t.querySelector("title"))).then((t=>t.textContent)).then((t=>{t=t.replaceAll("&","%26");try{_.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+t}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+t}`)}catch(t){_.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`)}}))}))}else if(window.location.pathname.includes("/collections/")&&!window.location.pathname.includes("/products/")&&this.isShopify){let e=window.location.href.split("collections/"),s="";if(e[1].includes("?")){s=e[1].split("?")[0]}else s=e[1];t=s.replace(/\-/g," ").replace(/\//g,"");var i=this.titleCase(t);const p="Hey! I would like to know more about";_.setAttribute("href",`https://wa.me/${this.phone}?text=${p+" "+i}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${p+" "+i}`)}else if(window.location.pathname.includes("/products/")&&window.location.href.includes("variant")&&""!==this.pdp_prefill_text&&this.isShopify&&this.includeVariant){let i=window.location.href,o=i.split("products/"),l="";if(o[1].includes("?")){l=o[1].split("?")[0]}else l=o[1];t=l.replace(/\-/g," ").replace(/\//g,""),e=l+".xml";e=i.replace(l,e);s=this.titleCase(t);var p=this.getParameterByName("variant",window.location.href);fetch(e).then((t=>{t.text().then((t=>(new DOMParser).parseFromString(t,"text/xml"))).then((t=>[t.querySelectorAll("variant"),t.querySelector("title")])).then((t=>{for(const e of t[0])if(e.querySelector("id").textContent===p)return[e.querySelector("title").textContent,t[1].textContent]})).then((t=>{try{var e=this.titleCase(t[0]).replace(/\-/g," ").replace(/\//g,"");_.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+t[1].replaceAll("&","%26")+" "+e}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+t[1].replaceAll("&","%26")+" "+e}`)}catch(t){_.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`)}}))})).catch((t=>{_.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.pdp_prefill_text+" "+s}`)}))}else _.setAttribute("href",`https://wa.me/${this.phone}?text=${this.prefill_text}`),n.setAttribute("href",`https://wa.me/${this.phone}?text=${this.prefill_text}`);if(_.setAttribute("style","text-decoration: none"),_.setAttribute("target","_blank"),h.appendChild(_),n.setAttribute("target","_blank"),n.setAttribute("class","whatsapp__poweredBy"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))if("widget_text"===this.widget_type_mobile){let t=document.createElement("button");t.setAttribute("class","landbot-whatsapp__button"),t.setAttribute("style",`min-width:${this.display_size_mobile}px; padding:${this.display_size_mobile/16}px`),_.appendChild(t);let e=document.createElement("i");e.setAttribute("class","fab fa-whatsapp"),e.setAttribute("style","font-size: 24px; margin-right: 5px"),t.appendChild(e);let s=document.createElement("p");s.setAttribute("style","margin: 0"),s.innerText=this.button_message_mobile,t.appendChild(s),"left"===this.position_mobile&&"top"!==this.pop_up_message_position?(n.setAttribute("class","whatsapp__poweredBy"),120===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+40}px;`):n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+12}px;`)),140===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+20}px;`):n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+8}px;`)),160===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+10}px;`):n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+8}px;`))):"right"===this.position_mobile&&"top"!==this.pop_up_message_position&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredBySideLefty"),120===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`right: ${this.display_size_mobile+this.button_message_mobile.length+40}px;`):n.setAttribute("style",`right: ${this.display_size_mobile+this.button_message_mobile.length+12}px;`)),140===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`right: ${this.display_size_mobile+this.button_message_mobile.length+20}px;`):n.setAttribute("style",`right: ${this.display_size_mobile+this.button_message_mobile.length+8}px;`)),160===this.display_size_mobile&&(19===this.button_message_mobile.length||20===this.button_message_mobile.length?n.setAttribute("style",`left: ${this.display_size_mobile+this.button_message_mobile.length+10}px;`):n.setAttribute("style",`left: ${this.display_size_desktop+this.button_message_mobile.length+8}px;`))),"top"===this.pop_up_message_position&&"left"===this.position_mobile?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`bottom: ${this.display_size_mobile/2.5+2}px; left: 0px;`)):"top"===this.pop_up_message_position&&"right"===this.position_mobile&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredByTopRight"),n.setAttribute("style",`bottom: ${this.display_size_mobile/2.5+2}px; right: 0px;`))}else{let t=document.createElement("img");t.src="https://s3.ap-south-1.amazonaws.com/cdn.limechat.ai/packs/js/whatsapp_widget/media/LC_WA.png",t.setAttribute("style",`width:${this.display_size_mobile}px; opacity:1`),_.appendChild(t),"left"===this.position_mobile&&"top"!==this.pop_up_message_position?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`left: ${this.display_size_mobile+12}px;`)):"right"===this.position_mobile&&"top"!==this.pop_up_message_position&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredBySideLefty"),n.setAttribute("style",`right: ${this.display_size_mobile+12}px;`)),"top"===this.pop_up_message_position&&"left"===this.position_mobile?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`bottom: ${this.display_size_mobile+14}px; left: 0px;`)):"top"===this.pop_up_message_position&&"right"===this.position_mobile&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredByTopRight"),n.setAttribute("style",`bottom: ${this.display_size_mobile+14}px; right: 0px;`))}else if("widget_text"===this.widget_type_desktop){let t=document.createElement("button");t.setAttribute("class","landbot-whatsapp__button"),t.setAttribute("style",`min-width:${this.display_size_desktop}px; padding:${this.display_size_desktop/16}px`),_.appendChild(t);let e=document.createElement("i");e.setAttribute("class","fab fa-whatsapp"),e.setAttribute("style","font-size: 24px; margin-right: 5px"),t.appendChild(e);let s=document.createElement("p");s.setAttribute("style","margin: 0"),s.innerText=this.button_message_desktop,t.appendChild(s),"left"===this.position_desktop&&"top"!==this.pop_up_message_position?(n.setAttribute("class","whatsapp__poweredBy"),120===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","left: 110%;")),140===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","left: 110%;")),160===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","left: 110%;"))):"right"===this.position_desktop&&"top"!==this.pop_up_message_position&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredBySideLefty"),120===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","right: 110%;")),140===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","right: 110%;")),160===this.display_size_desktop&&(19===this.button_message_desktop.length||this.button_message_desktop.length,n.setAttribute("style","right: 110%;"))),"top"===this.pop_up_message_position&&"left"===this.position_desktop?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`bottom: ${this.display_size_desktop/2.7+2}px; left: 0px;`)):"top"===this.pop_up_message_position&&"right"===this.position_desktop&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredByTopRight"),n.setAttribute("style",`bottom: ${this.display_size_desktop/2.7+2}px; right: 0px;`))}else{let t=document.createElement("img");t.src="https://s3.ap-south-1.amazonaws.com/cdn.limechat.ai/packs/js/whatsapp_widget/media/LC_WA.png",t.setAttribute("style",`width:${this.display_size_desktop}px; opacity:1`),_.appendChild(t),"left"===this.position_desktop&&"top"!==this.pop_up_message_position?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`left: ${this.display_size_desktop+12}px; bottom: ${.2*this.display_size_desktop}px;`)):"right"===this.position_desktop&&"top"!==this.pop_up_message_position&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredBySideLefty"),n.setAttribute("style",`right: ${this.display_size_desktop+12}px; bottom: ${.2*this.display_size_desktop}px;\n              \n              `)),"top"===this.pop_up_message_position&&"left"===this.position_desktop?(n.setAttribute("class","whatsapp__poweredBy"),n.setAttribute("style",`bottom: ${this.display_size_desktop+12}px; left: 0px;`)):"top"===this.pop_up_message_position&&"right"===this.position_desktop&&(n.setAttribute("class","whatsapp__poweredBy whatsapp__poweredByTopRight"),n.setAttribute("style",`bottom: ${1.5*this.display_size_desktop}px; right: 0px;`))}document.createElement("div");let r=document.createElement("img");this.pop_up_image.length>2&&(r.src=this.pop_up_image,r.setAttribute("style","width:24px;\n          float:left;\n          height:24px;\n          margin-right: 5px;\n          margin-top:-4px;\n          border-radius: 50%;"));let d=document.createElement("img");d.src="https://s3.ap-south-1.amazonaws.com/cdn.limechat.ai/packs/js/whatsapp_widget/media/LC_close.png",d.setAttribute("class","closePopUp"),d.removeAttribute("href"),d.addEventListener("click",(function(t){n.remove(),t.preventDefault()}),!1),n.innerText=this.pop_up_message_text,this.show_pop_up&&setTimeout((function(){n.append(d),r.src.length>2&&n.prepend(r),h.appendChild(n)}),1e3*this.pop_up_delay)}}}