var gfp_aff_toolbar;;window.__goaffpro={"pre_checkout_ref_input_data":{"input_label":"Referred By?","input_placeholder":"Referral Code"},"shop":"ugaoo-store.myshopify.com","cookie_duration":604800,"checkout_page_callback":true,"scripts":[],"first_touch_or_last":"last_touch","identifiers":["ref","aff","wpam_id","click_id"],"noref_cookie_identifiers":["noref"],"integration":"shopify","force_callback":true,"partner_portal_subdomain":"ugaoo-store.goaffpro.com","customer_affiliate_connect_auto":false,"use_local_storage":false,"autolink_ref_parameter":"ref"};var goaffpro_identifiers=["gfp_ref","ref","aff","wpam_id","click_id"],source_identifiers=["gfp_sub_id","source","utm_source","sub_id","tx_id","public_id"],gfp_additional=window.__goaffpro&&window.__goaffpro.identifiers,isFirstTouch=window.__goaffpro&&("first_touch"===window.__goaffpro.first_touch_or_last||"first_touch_nonblocking"===window.__goaffpro.first_touch_or_last),gfp_setOrganic=window.__goaffpro&&"first_touch"===window.__goaffpro.first_touch_or_last,useLocalStorage=window.__goaffpro&&window.__goaffpro.use_local_storage,gfp_discount_code_cookie="dcode",gfp_no_ref_cookies=window.__goaffpro&&window.__goaffpro.noref_cookie_identifiers||["noref"];gfp_additional&&gfp_additional.forEach(function(o){goaffpro_identifiers.push(o)});var gfp_api_server="https://api2.goaffpro.com";window.goaffproOrder&&!window.goaffpro_order&&(window.goaffpro_order=window.goaffproOrder);var gfp_cookieManager={getCookie:function(o){if(useLocalStorage)return localStorage.getItem(o);const e=document.cookie.split("; ")||[];const i={};for(var r,t=0;t<e.length;t++){var f=e[t].split("="),n=f.slice(1).join("=");try{var a=decodeURIComponent(f[0]);if(i[a]=(r='"'===(r=n)[0]?r.slice(1,-1):r).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),o===a)break}catch(o){}}return i[o]},deleteCookie:function(o){gfp_cookieManager.setCookie(o,"",-1e3)},setCookie:function(o,e,i){var r=i||(window.__goaffpro&&-1<window.__goaffpro.cookie_duration?window.__goaffpro.cookie_duration:604800);useLocalStorage&&localStorage.setItem(o,e),"ref"===o&&r&&gfpSetCookie("gfp_ref_expires",Date.now()+1e3*r);var t=";";r&&(t="; expires="+new Date((new Date).getTime()+1e3*r).toUTCString()+";");i=location.hostname,r=i.split(".");1===r.length?document.cookie=o+"="+e+t+"; path=/":(r.shift(),r="."+r.join("."),document.cookie=o+"="+e+t+"path=/; domain="+r,!gfpGetCookie(o)!==e&&(r="."+i,document.cookie=o+"="+e+t+"path=/; domain="+r))}};function gfpGetCookie(o){return gfp_cookieManager.getCookie(o)}function gfpDeleteCookie(o){return gfp_cookieManager.deleteCookie(o)}function gfpSetCookie(o,e){return gfp_cookieManager.setCookie(o,e)}function getRefCode(){if(isFirstTouch&&gfpGetCookie("ref"))return gfpGetCookie("ref");var o=searchInQuery(goaffpro_identifiers,document.location.search);return o||((o=searchInQuery(goaffpro_identifiers,document.location.hash))||(o=regexSearch(goaffpro_identifiers))||(o=searchInQuery(goaffpro_identifiers,goaffproShopifyStVariableFix()))?o:-1<goaffpro_identifiers.indexOf("hash")?document.location.hash&&document.location.hash.substring(1):-1<goaffpro_identifiers.indexOf("subdomain")?document.location.host.split(".")[0]:isFirstTouch&&gfp_setOrganic?"organic":null)}function regexSearch(o){for(var e=o.filter(function(o){return o.startsWith("regexp:")}).map(function(o){return o.substr(7)}),i=0;i<e.length;i++){var r=e[i],r=document.location.href.match(new RegExp(r,"i"));if(r&&0<r.length)return r[1]}}function getSourceId(){return searchInQuery(source_identifiers,document.location.search)}function searchInQuery(o,e){if(o&&0!==o.length){e=e||document.location.search;if(0<e.length){const r=new URLSearchParams(e.toLowerCase());for(var i of o)if(r.get(i))return r.get(i).trim()}}}function getShop(){var e=void 0;return Object.keys(document.scripts).forEach(function(o){o=document.scripts[o];o.src&&o.src.startsWith("https://static.goaffpro.com/reftracker.js")&&(e=o.src.replace("https://static.goaffpro.com/reftracker.js?shop=",""))}),e||window.__goaffpro&&window.__goaffpro.shop||document.location.host}function trackVisit(){var i=gfpGetCookie("ref"),r=gfpGetCookie(gfp_discount_code_cookie)||gfpGetCookie("discount_code"),o=gfpGetCookie("source"),e=gfpGetCookie("gfp_v_id");if(i||r){const t=new URL(gfp_api_server+"/shop"),f={sub_id:o,ref:i,shop:getShop(),location:document.location.href,navigator:navigator.userAgent,referrer:document.referrer,discount_code:r,visit_id:e};return Object.keys(f).forEach(function(o){void 0!==f[o]&&t.searchParams.append(o,f[o])}),fetch(t.href).then(function(o){return 420===o.status?(gfp_remove_cookies(),{}):o.json()}).then(function(o){var e;o.discount_code&&r!==o.discount_code&&(gfpGetCookie(gfp_discount_code_cookie)!==o.discount_code&&gfpSetCookie(gfp_discount_code_cookie,o.discount_code),"woocommerce"===window.__goaffpro.integration?gfp_cookieManager.setCookie(gfp_discount_code_cookie,o.discount_code):(e=new XMLHttpRequest,o.apply_discount_on_myshopify?e.open("GET","https://"+o.website+"/discount/"+encodeURIComponent(o.discount_code)):e.open("GET","/discount/"+encodeURIComponent(o.discount_code)),e.send())),o.visit_id&&gfp_cookieManager.setCookie("gfp_v_id",""+o.visit_id),o.cookie_duration&&(i&&gfp_cookieManager.setCookie("ref",i,o.cookie_duration),r&&gfp_cookieManager.setCookie(gfp_discount_code_cookie,r,o.cookie_duration),source&&gfp_cookieManager.setCookie("source",""+source,o.cookie_duration),o.visit_id&&gfp_cookieManager.setCookie("gfp_v_id",""+o.visit_id,o.cookie_duration))}).catch(function(o){})}return Promise.resolve()}function checkoutPageCallback(){if(window.__goaffpro){var o=window.__goaffpro.integration;if("undefined"!=typeof Shopify&&(Shopify.checkout||Shopify.Checkout)&&window.__goaffpro.checkout_page_callback)doCallback(Shopify.checkout?Shopify.checkout.order_id||Shopify.checkout.id:null,Shopify.checkout||Shopify.Checkout);else if(void 0!==window.__big)doCallback(window.__big.order_id,window.__big);else if(void 0!==window.Goaffpro&&window.Goaffpro.data)doCallback(window.Goaffpro.data.order_id,window.Goaffpro.data);else if("bigcommerce"===o){var e=document.body.innerHTML.split(" ").join(""),e=/orderId:'(.*?)'/gm.exec(e);e&&0<e.length&&doCallback(e[1],{})}else if("squarespace"===o){var i=searchInQuery(["oid"]);if(i||window.goaffpro_order)return doCallback(i||window.goaffpro_order.id,window.goaffpro_order)}else if("webflow"===o){i=searchInQuery(["orderid"]);i&&doCallback(i,{id:i})}else if("woocommerce"===o&&window.order){var r=window.order;r&&doCallback(r.id,r)}else{if(window.goaffpro_order&&window.goaffpro_order.id)return doCallback(window.goaffpro_order.id,window.goaffpro_order);document.getElementById("goaffpro_order_elem")&&(r=(o=document.getElementById("goaffpro_order_elem")).getAttribute("data-order-id"),o=o.getAttribute("data-increment-id"),r&&doCallback(r,{id:r,increment_id:o}))}}}function goaffproTrackConversion(o){doCallback("string"==typeof o?void 0:o.id,o)}function goaffproTrackConversionSync(o){doCallback("string"==typeof o?void 0:o.id,o,!0)}var gfpCallbackMade=!1;function doCallback(o,e,i=!1){var r=gfpGetCookie("ref"),t=gfpGetCookie(gfp_discount_code_cookie),f=gfpGetCookie("source"),n=gfpGetCookie("gfp_v_id");if(r||t||window.__goaffpro.force_callback){if(gfpCallbackMade)return;gfpCallbackMade=!0;e=JSON.stringify({sub_id:f,ref:r,shop:getShop(),location:document.location,navigator:navigator.userAgent,referrer:document.referrer,discount_code:t,order_id:o,visit_id:n,data:e});if(i)navigator.sendBeacon("https://beacon.goaffpro.workers.dev/",e);else{const a=new XMLHttpRequest;a.open("POST",gfp_api_server+"/order_complete"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(e)}gfp_cookieManager.deleteCookie("gfp_v_id")}window.__goaffpro&&window.__goaffpro.remove_tracking_post_order&&gfp_remove_cookies()}function gfp_remove_cookies(o=["ref","source",gfp_discount_code_cookie,"discount_code","sitestripe","gfp_v_id","gfp_ref_expires"]){o.forEach(gfp_cookieManager.deleteCookie),window.__goaffpro&&"shopify"===window.__goaffpro.integration&&window.__goaffpro.cart_level_tracking&&removeRefFromCart()}var refcode=getRefCode();function testForExpiration(){var o=gfp_cookieManager.getCookie("gfp_ref_expires");o&&0<Date.now()-new Date(Number(o))&&gfp_remove_cookies()}function gfpSetSource(){var o=getSourceId();o&&gfp_cookieManager.setCookie("source",o)}function addRefToCart(){var o=gfpGetCookie("ref");if(o){const i=new URLSearchParams;var e=gfpGetCookie("gfp_v_id");return i.append("attributes[__ref]",o),e&&i.append("attributes[__visit_id]",e),fetch("/cart/update.js",{method:"POST",body:i}).then(()=>{})}}function removeRefFromCart(){const o=new URLSearchParams;return o.append("attributes[__ref]",""),o.append("attributes[__visit_id]",""),fetch("/cart/update.js",{method:"POST",body:o}).then(()=>{})}function gfpLoadScript(o,e){const i=document.createElement("script");i.src=o,i.async=!0,e&&(i.type=e),document.head.appendChild(i)}function showSiteStripeToolbar(){var o;gfp_aff_toolbar||!window.__goaffpro.aff_bar_config||(o=searchInQuery(["toolbar"],document.location.search)||gfpGetCookie("sitestripe"))&&(gfp_aff_toolbar=window.__goaffpro.aff_bar_config,gfp_aff_toolbar.affiliate_portal_link="https://"+window.__goaffpro.partner_portal_subdomain,gfp_aff_toolbar.ref_code=o,gfpLoadScript("https://static.goaffpro.com/sitestripe2.js"),gfp_cookieManager.setCookie("sitestripe",o))}function gfpConnectCustomer(){var o,e,i;window&&window.GFPConnect&&window.GFPConnect.customer&&window.__goaffpro.customer_affiliate_connect_auto&&(o=gfpGetCookie("ref"),e=gfpGetCookie(gfp_discount_code_cookie),(o||e)&&((i=new XMLHttpRequest).open("POST",gfp_api_server+"/connect_customer"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify({ref:o,shop:getShop(),discount_code:e,customer:window.GFPConnect.customer}))))}function goaffproShopifyStVariableFix(){if(window.__goaffpro.shopify_use_st_variable&&window.__st&&window.__st.pageurl)return new URL(`https://${window.__st.pageurl}`).search}refcode&&refcode!==gfpGetCookie("ref")&&(gfp_cookieManager.setCookie("ref",refcode),gfp_remove_cookies(["source",gfp_discount_code_cookie,"discount_code","gfp_v_id"])),gfpSetSource(),testForExpiration(),-1<gfp_no_ref_cookies.indexOf(refcode)||"shareasale"===gfpGetCookie("source")?gfp_remove_cookies():(trackVisit(),window.__goaffpro&&"shopify"===window.__goaffpro.integration&&window.__goaffpro.cart_level_tracking&&addRefToCart(),checkoutPageCallback()),refcode=gfpGetCookie("ref"),window.__goaffpro.scripts&&Array.isArray(window.__goaffpro.scripts)&&window.__goaffpro.scripts.forEach(function({src:o,type:e}){gfpLoadScript(o,e)}),showSiteStripeToolbar(),gfpConnectCustomer(),window.addEventListener("message",function(o){o.data&&o.data.goaffproOrder&&goaffproTrackConversion(o.data.goaffproOrder)}),window.addEventListener("goaffproTrackConversion",o=>{o&&o.detail&&goaffproTrackConversion(o.detail)}),window.addEventListener("goaffproReferralCode",o=>{o&&o.detail&&void 0!==o.detail.ref&&gfpGetCookie("ref")!==o.detail.ref&&(null===o.detail.ref||-1<gfp_no_ref_cookies.indexOf(o.detail.ref)?gfp_remove_cookies():(gfpSetCookie("ref",o.detail.ref),trackVisit().then(()=>{checkoutPageCallback()})))});!function(){let a;function t(){if(a=gfpGetCookie("ref"),a&&"organic"!==a){const o=window.__goaffpro.autolink_ref_parameter;if(o){var t=[];if(document.querySelectorAll("a").forEach(function(e){t.push(e)}),t&&0!==t.length){const r=/fb|messenger|twitter|instagram|musical_ly|bytedance/gim.test(navigator.userAgent);t.forEach(function(e){const t=e.href;if(t&&"string"==typeof t&&t.startsWith("http")){const n=new URL(e.href);!r&&n.hostname===document.location.hostname||n.searchParams.get(o)===encodeURIComponent(a)||(n.searchParams.set(o,a),e.href=n.href)}})}}}}var e;e=function(){t();const e=new MutationObserver(()=>function(n,o){let r=0;return(...e)=>{var t=(new Date).getTime();if(t-r>o)return r=t,n(...e)}}(t,2e3));e.observe(document.body,{attributes:!0,childList:!0,subtree:!0})},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e),window.addEventListener("goaffproReferralCode",e=>{e&&e.detail&&void 0!==e.detail.ref&&a!==e.detail.ref&&t(e.detail.ref)})}();undefined